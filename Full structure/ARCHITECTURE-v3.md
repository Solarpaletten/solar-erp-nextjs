# ğŸ“ SOLAR ERP â€” ARCHITECTURE v3 (CANON)

**Ğ’ĞµÑ€ÑĞ¸Ñ:** 3.0 (Final Canon)  
**Ğ”Ğ°Ñ‚Ğ°:** 28.12.2025  
**ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ°:** Leanid (Architect), Dashka (Senior), Claude (Engineer)

---

## ğŸ¯ ĞœĞ˜Ğ¡Ğ¡Ğ˜Ğ¯

Solar ERP â€” Ğ¼Ğ½Ğ¾Ğ³Ğ¾Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒÑĞºĞ°Ñ ERP-Ğ¿Ğ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼Ğ° Ñ Ñ‚Ñ€Ñ‘Ñ…ÑƒÑ€Ğ¾Ğ²Ğ½ĞµĞ²Ğ¾Ğ¹ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ¾Ğ¹,
Ğ³Ğ´Ğµ Ñ‡Ñ‘Ñ‚ĞºĞ¾ Ñ€Ğ°Ğ·Ğ´ĞµĞ»ĞµĞ½Ñ‹: **ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ**, **ĞšĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ñ**, **Ğ‘Ğ¸Ğ·Ğ½ĞµÑ-Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑÑ‹**.

---

## ğŸ§­ Ğ¢Ğ Ğ˜ Ğ£Ğ ĞĞ’ĞĞ¯ Ğ¡Ğ˜Ğ¡Ğ¢Ğ•ĞœĞ«

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ” Ğ£Ğ ĞĞ’Ğ•ĞĞ¬ 0: AUTH                                             â”‚
â”‚  Ğ¦ĞµĞ»ÑŒ: Ğ¿Ğ¾Ğ¿Ğ°ÑÑ‚ÑŒ Ğ² ÑĞ¸ÑÑ‚ĞµĞ¼Ñƒ                                        â”‚
â”‚  URL: /auth/*                                                   â”‚
â”‚  Ğ”ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ: login, register, reset-password                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚ âœ… JWT token
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ‘¤ Ğ£Ğ ĞĞ’Ğ•ĞĞ¬ 1: DASHBOARD (Personal)                             â”‚
â”‚  Ğ¦ĞµĞ»ÑŒ: ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ĞŸĞĞ›Ğ¬Ğ—ĞĞ’ĞĞ¢Ğ•Ğ›Ğ•Ğœ Ğ¸ ĞµĞ³Ğ¾ ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸ÑĞ¼Ğ¸                â”‚
â”‚  URL: /dashboard/*                                              â”‚
â”‚  Ğ”ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ: companies, invoices, profile, settings               â”‚
â”‚                                                                 â”‚
â”‚  ğŸ“Œ Ğ¢Ñ‹ Ğ·Ğ´ĞµÑÑŒ = ĞŸĞĞ›Ğ¬Ğ—ĞĞ’ĞĞ¢Ğ•Ğ›Ğ¬ (ĞµÑ‰Ñ‘ Ğ½Ğµ Ğ²Ğ½ÑƒÑ‚Ñ€Ğ¸ Ğ±Ğ¸Ğ·Ğ½ĞµÑĞ°)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚ ĞšĞ»Ğ¸Ğº "Ğ’Ğ¾Ğ¹Ñ‚Ğ¸ Ğ² ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ñ"
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ¢ Ğ£Ğ ĞĞ’Ğ•ĞĞ¬ 2: COMPANY (Business)                               â”‚
â”‚  Ğ¦ĞµĞ»ÑŒ: ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ‘Ğ˜Ğ—ĞĞ•Ğ¡ĞĞœ ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ğ¾Ğ¹ ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸                  â”‚
â”‚  URL: /company/[companyId]/*                                    â”‚
â”‚  ĞœĞ¾Ğ´ÑƒĞ»Ğ¸: clients, products, warehouse, purchases, sales,        â”‚
â”‚          bank, reports, settings                                â”‚
â”‚                                                                 â”‚
â”‚  ğŸ“Œ Ğ¢Ñ‹ Ğ·Ğ´ĞµÑÑŒ = Ğ¡ĞĞ¢Ğ Ğ£Ğ”ĞĞ˜Ğš ĞšĞĞœĞŸĞĞĞ˜Ğ˜ (Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑˆÑŒ Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğ¼Ğ¸)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš« Ğ—ĞĞŸĞ Ğ•Ğ©ĞĞĞĞ«Ğ• ĞŸĞ ĞĞšĞ¢Ğ˜ĞšĞ˜

| Ğ§Ñ‚Ğ¾ | ĞŸĞ¾Ñ‡ĞµĞ¼Ñƒ Ğ·Ğ°Ğ¿Ñ€ĞµÑ‰ĞµĞ½Ğ¾ |
|-----|------------------|
| `src/` | Ğ£ÑĞ»Ğ¾Ğ¶Ğ½ÑĞµÑ‚ Ğ¿ÑƒÑ‚Ğ¸, Ğ½Ğµ Ğ½ÑƒĞ¶ĞµĞ½ Ğ² Next.js |
| `(products)` | UI-Ğ°Ğ±ÑÑ‚Ñ€Ğ°ĞºÑ†Ğ¸Ñ, Ğ½Ğµ Ğ´Ğ¾Ğ¼ĞµĞ½Ğ½Ğ°Ñ ÑÑƒÑ‰Ğ½Ğ¾ÑÑ‚ÑŒ |
| `(dashboard)` | Route group Ğ±ĞµĞ· ÑĞ¼Ñ‹ÑĞ»Ğ° |
| Ğ¢Ğ¸Ğ¿Ñ‹ Ğ² ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ°Ñ… | Ğ”Ğ¾Ğ»Ğ¶Ğ½Ñ‹ Ğ±Ñ‹Ñ‚ÑŒ Ğ² `types/` |
| Fetch Ğ² ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ°Ñ… | Ğ”Ğ¾Ğ»Ğ¶ĞµĞ½ Ğ±Ñ‹Ñ‚ÑŒ Ğ² `lib/api/` |

---

## âœ… ĞĞ‘Ğ¯Ğ—ĞĞ¢Ğ•Ğ›Ğ¬ĞĞ«Ğ• ĞŸĞ ĞĞ’Ğ˜Ğ›Ğ

### 1. Ğ—ĞµÑ€ĞºĞ°Ğ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ Frontend â†” Backend

```
Frontend                          Backend
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
/company/[id]/clients      â†’      /api/company/[id]/clients
/company/[id]/products     â†’      /api/company/[id]/products
/company/[id]/sales        â†’      /api/company/[id]/sales
```

### 2. Company-first Navigation

Ğ’ÑĞµ Ğ±Ğ¸Ğ·Ğ½ĞµÑ-Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¿Ñ€Ğ¸Ğ²ÑĞ·Ğ°Ğ½Ñ‹ Ğº ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸:

```
/company/17/clients       â† ĞšĞ»Ğ¸ĞµĞ½Ñ‚Ñ‹ ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸ 17
/company/17/products      â† Ğ¢Ğ¾Ğ²Ğ°Ñ€Ñ‹ ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸ 17
/company/17/sales         â† ĞŸÑ€Ğ¾Ğ´Ğ°Ğ¶Ğ¸ ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸ 17
```

### 3. Ğ˜Ğ·Ğ¾Ğ»ÑÑ†Ğ¸Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… (Multi-tenant)

```typescript
// ĞšĞĞ–Ğ”Ğ«Ğ™ Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ ÑĞ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ñ‚ company_id
const clients = await prisma.clients.findMany({
  where: { company_id: companyId },
});
```

---

## ğŸ“Š ĞœĞĞ”Ğ£Ğ›Ğ˜ ERP (Ğ£Ğ ĞĞ’Ğ•ĞĞ¬ 2)

| ĞœĞ¾Ğ´ÑƒĞ»ÑŒ | URL | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ |
|--------|-----|----------|
| **Clients** | `/clients` | ĞšĞ»Ğ¸ĞµĞ½Ñ‚Ñ‹ ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸ |
| **Products** | `/products` | Ğ¢Ğ¾Ğ²Ğ°Ñ€Ñ‹ Ğ¸ ÑƒÑĞ»ÑƒĞ³Ğ¸ |
| **Warehouse** | `/warehouse` | Ğ¡ĞºĞ»Ğ°Ğ´ Ğ¸ Ğ¾ÑÑ‚Ğ°Ñ‚ĞºĞ¸ |
| **Purchases** | `/purchases` | Ğ—Ğ°ĞºÑƒĞ¿ĞºĞ¸ Ñƒ Ğ¿Ğ¾ÑÑ‚Ğ°Ğ²Ñ‰Ğ¸ĞºĞ¾Ğ² |
| **Sales** | `/sales` | ĞŸÑ€Ğ¾Ğ´Ğ°Ğ¶Ğ¸ ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ°Ğ¼ |
| **Bank** | `/bank` | Ğ‘Ğ°Ğ½ĞºĞ¾Ğ²ÑĞºĞ¸Ğµ ÑÑ‡ĞµÑ‚Ğ° Ğ¸ Ğ¿Ğ»Ğ°Ñ‚ĞµĞ¶Ğ¸ |
| **Reports** | `/reports` | VAT, P&L, Balance, Cashflow |
| **Settings** | `/settings` | ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸ |

---

## ğŸ” Ğ¡Ğ˜Ğ¡Ğ¢Ğ•ĞœĞ Ğ”ĞĞ¡Ğ¢Ğ£ĞŸĞ

### Ğ£Ñ€Ğ¾Ğ²Ğ½Ğ¸ Ñ€Ğ¾Ğ»ĞµĞ¹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PLATFORM LEVEL (Ğ£Ñ€Ğ¾Ğ²ĞµĞ½ÑŒ Ğ¿Ğ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼Ñ‹)                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                              â”‚
â”‚  â€¢ Platform Admin â€” ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ Ğ²ÑĞµĞ¹ Ğ¿Ğ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼Ğ¾Ğ¹                   â”‚
â”‚  â€¢ User â€” Ğ¾Ğ±Ñ‹Ñ‡Ğ½Ñ‹Ğ¹ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  COMPANY LEVEL (Ğ£Ñ€Ğ¾Ğ²ĞµĞ½ÑŒ ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸)                               â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                              â”‚
â”‚  â€¢ Owner â€” Ğ²Ğ»Ğ°Ğ´ĞµĞ»ĞµÑ† ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸ (Ğ¿Ğ¾Ğ»Ğ½Ñ‹Ğ¹ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿)                    â”‚
â”‚  â€¢ Admin â€” Ğ°Ğ´Ğ¼Ğ¸Ğ½Ğ¸ÑÑ‚Ñ€Ğ°Ñ‚Ğ¾Ñ€ (Ğ¿Ğ¾Ñ‡Ñ‚Ğ¸ Ğ²ÑÑ‘)                            â”‚
â”‚  â€¢ Manager â€” Ğ¼ĞµĞ½ĞµĞ´Ğ¶ĞµÑ€ (Ğ¿Ñ€Ğ¾Ğ´Ğ°Ğ¶Ğ¸, ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ñ‹)                        â”‚
â”‚  â€¢ Accountant â€” Ğ±ÑƒÑ…Ğ³Ğ°Ğ»Ñ‚ĞµÑ€ (Ğ±Ğ°Ğ½Ğº, Ğ¾Ñ‚Ñ‡Ñ‘Ñ‚Ñ‹)                        â”‚
â”‚  â€¢ Viewer â€” Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ¿Ñ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ĞœĞ°Ñ‚Ñ€Ğ¸Ñ†Ğ° Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ°

| Ğ Ğ¾Ğ»ÑŒ | Clients | Products | Sales | Bank | Reports | Settings |
|------|---------|----------|-------|------|---------|----------|
| Owner | âœ… | âœ… | âœ… | âœ… | âœ… | âœ… |
| Admin | âœ… | âœ… | âœ… | âœ… | âœ… | âš ï¸ |
| Manager | âœ… | ğŸ‘ï¸ | âœ… | âŒ | ğŸ‘ï¸ | âŒ |
| Accountant | ğŸ‘ï¸ | ğŸ‘ï¸ | ğŸ‘ï¸ | âœ… | âœ… | âŒ |
| Viewer | ğŸ‘ï¸ | ğŸ‘ï¸ | ğŸ‘ï¸ | ğŸ‘ï¸ | ğŸ‘ï¸ | âŒ |

âœ… = Ğ¿Ğ¾Ğ»Ğ½Ñ‹Ğ¹ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿, ğŸ‘ï¸ = Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ñ‡Ñ‚ĞµĞ½Ğ¸Ğµ, âŒ = Ğ½ĞµÑ‚ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ°, âš ï¸ = Ñ‡Ğ°ÑÑ‚Ğ¸Ñ‡Ğ½Ñ‹Ğ¹

---

## ğŸ—„ï¸ DATABASE SCHEMA (ĞšĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PLATFORM LEVEL                                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                              â”‚
â”‚  users              â€” Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ğ¸ Ğ¿Ğ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼Ñ‹                    â”‚
â”‚  companies          â€” ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸                                  â”‚
â”‚  company_users      â€” ÑĞ²ÑĞ·ÑŒ user â†” company (Ñ€Ğ¾Ğ»Ğ¸)               â”‚
â”‚  platform_invoices  â€” ÑÑ‡ĞµÑ‚Ğ° SaaS                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  COMPANY LEVEL (Ğ²ÑĞµ Ñ company_id)                               â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                              â”‚
â”‚  clients            â€” ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ñ‹ ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸                          â”‚
â”‚  products           â€” Ñ‚Ğ¾Ğ²Ğ°Ñ€Ñ‹/ÑƒÑĞ»ÑƒĞ³Ğ¸                             â”‚
â”‚  stock              â€” Ğ¾ÑÑ‚Ğ°Ñ‚ĞºĞ¸ Ğ½Ğ° ÑĞºĞ»Ğ°Ğ´Ğµ                         â”‚
â”‚  stock_movements    â€” Ğ´Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ñ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ¾Ğ²                          â”‚
â”‚  purchases          â€” Ğ·Ğ°ĞºÑƒĞ¿ĞºĞ¸                                   â”‚
â”‚  purchase_items     â€” Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¸ Ğ·Ğ°ĞºÑƒĞ¿Ğ¾Ğº                           â”‚
â”‚  sales              â€” Ğ¿Ñ€Ğ¾Ğ´Ğ°Ğ¶Ğ¸                                   â”‚
â”‚  sale_items         â€” Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¸ Ğ¿Ñ€Ğ¾Ğ´Ğ°Ğ¶                            â”‚
â”‚  bank_accounts      â€” Ğ±Ğ°Ğ½ĞºĞ¾Ğ²ÑĞºĞ¸Ğµ ÑÑ‡ĞµÑ‚Ğ°                          â”‚
â”‚  bank_transactions  â€” Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ğ¸                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ DATA FLOW

```
User Action
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Page (app/)    â”‚  â† Ğ¢Ğ¾Ğ½ĞºĞ°Ñ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ°, Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ñ
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Hook (hooks/)  â”‚  â† State + Actions
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  API Client     â”‚  â† lib/api/*.ts
â”‚  (lib/api/)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  API Route      â”‚  â† app/api/**/route.ts
â”‚  (app/api/)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Prisma         â”‚  â† lib/prisma.ts
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PostgreSQL     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“‹ CHECKLIST: ĞĞĞ’Ğ«Ğ™ ĞœĞĞ”Ğ£Ğ›Ğ¬

ĞŸÑ€Ğ¸ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğ¸ Ğ½Ğ¾Ğ²Ğ¾Ğ³Ğ¾ Ğ¼Ğ¾Ğ´ÑƒĞ»Ñ (Ğ½Ğ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€, `invoices`):

### Frontend
- [ ] `app/company/[companyId]/invoices/page.tsx`
- [ ] `app/company/[companyId]/invoices/new/page.tsx`
- [ ] `app/company/[companyId]/invoices/[invoiceId]/page.tsx`
- [ ] `app/company/[companyId]/invoices/[invoiceId]/edit/page.tsx`

### Backend
- [ ] `app/api/company/[companyId]/invoices/route.ts`
- [ ] `app/api/company/[companyId]/invoices/[invoiceId]/route.ts`

### Support
- [ ] `types/invoices.ts`
- [ ] `lib/api/invoices.ts`
- [ ] `hooks/useInvoices.ts`
- [ ] `components/company/invoices/*.tsx`
- [ ] `config/invoices/columnsConfig.ts`

### Docs
- [ ] ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ `docs/API.md`

---

## ğŸ·ï¸ Ğ’Ğ•Ğ Ğ¡Ğ˜ĞĞĞ˜Ğ ĞĞ’ĞĞĞ˜Ğ•

| Ğ’ĞµÑ€ÑĞ¸Ñ | Ğ”Ğ°Ñ‚Ğ° | Ğ˜Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ |
|--------|------|-----------|
| v1.0 | 27.12.2025 | Initial SolarNetJS Template |
| v2.0 | 28.12.2025 | Company-first, ÑƒĞ±Ñ€Ğ°Ğ½Ñ‹ route groups |
| v3.0 | 28.12.2025 | 3-Level Architecture, ÑƒĞ±Ñ€Ğ°Ğ½ src/ |

---

## ğŸ–ï¸ ĞšĞĞœĞĞĞ”Ğ

| Ğ Ğ¾Ğ»ÑŒ | Ğ˜Ğ¼Ñ | ĞÑ‚Ğ²ĞµÑ‚ÑÑ‚Ğ²ĞµĞ½Ğ½Ğ¾ÑÑ‚ÑŒ |
|------|-----|-----------------|
| **Architect** | Leanid | ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ½Ñ‹Ğµ Ñ€ĞµÑˆĞµĞ½Ğ¸Ñ, vision |
| **Senior** | Dashka | ĞšĞ¾Ğ¾Ñ€Ğ´Ğ¸Ğ½Ğ°Ñ†Ğ¸Ñ, Ğ¢Ğ—, code review |
| **Engineer** | Claude | Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ, Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ |

---

**SolarNetJS Canon v3** â˜€ï¸  
*"ĞšĞ¾ÑĞ¼Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ ĞºĞ¾Ñ€Ğ°Ğ±Ğ»ÑŒ Ñ Ğ·Ğ°Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ½Ñ‹Ğ¼Ğ¸ Ğ±Ğ°ĞºĞ°Ğ¼Ğ¸ â€” ÑÑ‚Ñ€Ğ¾Ğ³Ğ¾ Ğº Ñ†ĞµĞ»Ğ¸!"* ğŸš€
